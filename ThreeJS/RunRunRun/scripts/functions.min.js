function playSound(e=defaultSound){var o=new Tone.Player(e.audio);return e.loop?o.loop=e.loop:o.loop=!1,e.autostart?o.autostart=e.autostart:o.autostart=!0,e.volume?o.volume.value=e.volume:o.volume.value=1,e.playbackRate?o.playbackRate=e.playbackRate:o.playbackRate=1,e.reverse?o.reverse=e.reverse:o.reverse=!1,Tone.start(),Tone.loaded().then(()=>{o.toDestination(),e.startTime&&o.start(e.startTime).toDestination()}),o}function soundPitch(e,o){return e.pitch&&e.pitch.disconnect(),e.pitch=new Tone.PitchShift(o).toDestination(),e.connect(e.pitch),e.pitch}function updateSound(e,o,n){const t={pitch:Tone.PitchShift,panning:Tone.Panner,filter:Tone.Filter,delay:Tone.FeedbackDelay,distortion:Tone.Distortion,reverb:Tone.Reverb,compressor:Tone.Compressor,autoFilter:Tone.AutoFilter,autoPanner:Tone.AutoPanner,chorus:Tone.Chorus,eq:Tone.EQ,feedback:Tone.FeedbackCombFilter,freeverb:Tone.Freeverb,jcreverb:Tone.JCReverb,tremolo:Tone.Tremolo,bitCrusher:Tone.BitCrusher,chebyshev:Tone.Chebyshev,convolver:Tone.Convolver,fuzz:Tone.Fuzz,gate:Tone.Gate,lfo:Tone.LFO,limiter:Tone.Limiter,phaser:Tone.Phaser,stereoWidener:Tone.StereoWidener,transientShaper:Tone.TransientShaper,wahWah:Tone.WahWah};return t[o]?(e[o]&&e[o].disconnect(),e[o]=new t[o](n).toDestination(),e.connect(e[o]),e[o]):void console.error(`Error: Invalid type "${o}"`)}function log(e){console.log(e)}function power(e,o){return Math.pow(e,o)}function round(e,o=2){return Math.round(e*power(10,o))/power(10,o)}function random(e=0,o=1,n=2){return round(Math.floor(Math.random()*(o-e+1))+e,n)}function ceil(e,o=2){return Math.ceil(e*power(10,o))/power(10,o)}function floor(e,o=2){return Math.floor(e*power(10,o))/power(10,o)}function abs(e){return Math.abs(e)}function squareRoot(e){return Math.sqrt(e)}function addRandomColors(e,o){if("number"!=typeof o)throw new Error("The second parameter must be a number");for(var n=e.length+o,t=e.length;t<n;t++){var r=Math.floor(16777215*Math.random()).toString(16);e[t]=[t,r,"#"+r]}return e}function createCSSColors(e){for(var o="",n="",t=0;t<e.length;t++){var r=e[t][0],a=e[t][1],c="--color-"+r;o+=c+":"+a+";\n",n+="."+r+"{color: var("+c+") !important;}\n",n+="."+r+"-bg{background-color: var("+c+") !important;}\n",n+="."+r+"-border{border-color: var("+c+") !important;}\n"}o+="--color-main:var(--color-"+mainColor+");\n",o+="--color-sub:var(--color-"+subColor+");\n";var l=":root {\n"+o+"\n}\n"+n;$("#colors-css").length&&$("#colors-css").remove(),$("head").append('<style id="colors-css">\n'+l+"\n</style>")}function createColorButtons(e,o,n){$(o).html("");for(var t=0;t<n.length;t++){var r=n[t][0];$(o).append("<button onClick=\"colorChange('"+r+"', '"+e+'\');" title="'+r+'" class="color '+r+" "+r+'-bg"></button>')}}function getColorByName(e){for(var o=0;o<colors.length;o++)if(colors[o][0]==e)return colors[o][1]}function colorChange(e,o){$("#"+o+" .color.selected").removeClass("selected"),$("#"+o+" .color."+e).addClass("selected"),window[o]=e,createCSSColors(colors);var n=getColorByName(e);if("mainColor"==o&&(scene.background=new THREE.Color(n),scene.fog=new THREE.Fog(n,sceneParams.near,sceneParams.far)),"subColor"==o){var t=floor.model.material;t.color.set(new THREE.Color(n))}}function showTip(){const e=tips[Math.floor(Math.random()*tips.length)];$("#tips").text(e)}function onKeyDown(e){var o=e.keyCode,n=keys.find(e=>e.code===o);n&&(movement[n.movement]=!0)}function onKeyUp(e){var o=e.keyCode,n=keys.find(e=>e.code===o);n&&(movement[n.movement]=!1)}const defaultSound={audio:"sound.mp3",loop:!1,volume:1,autostart:!0,startTime:0,playbackRate:1,reverse:!1};var movement={forward:!1,left:!1,backward:!1,right:!1,jump:!1,rotateLeft:!1,rotateRight:!1,up:!1,down:!1};const keys=[{key:"w",code:87,movement:"forward"},{key:"a",code:65,movement:"left"},{key:"s",code:83,movement:"backward"},{key:"d",code:68,movement:"right"},{key:"e",code:69,movement:"jump"},{key:"up",code:38,movement:"up"},{key:"down",code:40,movement:"down"},{key:"left",code:37,movement:"rotateLeft"},{key:"right",code:39,movement:"rotateRight"},{key:"space",code:32,movement:"jump"}];document.addEventListener("keydown",onKeyDown,!1),document.addEventListener("keyup",onKeyUp,!1);